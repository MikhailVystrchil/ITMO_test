## Описание задания и данных

Что мы имеем?
Большой и тяжелый датасет с данными банковских транзакций...

Описание датасета говорит нам:

> Этот анонимизированный набор данных реальных финансовые транзакции, который предназначен для разработки и тестирования моделей выявления мошеннических операций.  
   Он охватывает различные сценарии — от розничной торговли и ресторанов до путешествий и здравоохранения — и включает как легитимные, так и мошеннические операции. В нём представлены важные признаки, влияющие на распознавание мошенничества: сумма, тип устройства, география, валюта, тип карты и метка `is_fraud`.

Отметим про себя, что это датасет **реальных данных**, и продолжим!

Авторы задания предлагают определить существующие в нем закономерности и дать свою оценку, приступим!

## Первое приближение

Для начала разберемся с географией предоставленных нам данных!
Сразу любопытно... интуитивное предположение о том, что такие большие данные могут покрывать весь мир, очевидно ошибочно :(

Датасет располагает для нас данными всего по 12 странам:

 - 'Australia', 
 - 'Brazil', 
 - 'Canada', 
 - 'France', 
 - 'Germany', 
 - 'Japan', 
 - 'Mexico', 
 - 'Nigeria', 
 - 'Russia', 
 - 'Singapore', 
 - 'UK', 
 - 'USA'

Раз мы разобрались в пространстве наших данных, то стоит разобраться в их времени! Для этого рассмотрим временной диапазон предоставленных транзакций

<img src="/free_analysis/img/Figure_11.png" alt="Распределение транзакций по времени" width="1000"/>

Всего один месяц...
Да и распределение количества транзакций внутри периода наблюдений обладает малой вариацией - размах $\approx600$ при среднем в районе 31900.

Малый временной интервал не позволит выполнить качественную аналитику по типам интенсивности транзакций, так как не сможет учесть сезонность отпусков и праздников, так что рассмотрим данные с позиции мошеннических транзакций.
Для этого визуализируем количество мошеннических транзакций на карте мира:

<img src="/free_analysis/img/fraud_map_corrected.png" alt="Карта мошеннических транзакций" width="1000"/>


Кажется, общая тенденция становится видна, но не будем верить своим глазам и рассчитаем рейтинг стран по доле плохих переводов.
Ведь может же такое быть, что люди в Нигерии просто совершают гораздо больше покупок чем в загнивающей Америке.

**Топ-10 стран по уровню мошенничества:**

| Страна    | Мошеннические операции | Всего операций | Доля мошенничества |
| --------- | ---------------------- | -------------- | ------------------ |
| Mexico    | 298,841                | 785,704        | 0.3803             |
| Russia    | 299,425                | 793,730        | 0.3772             |
| Brazil    | 298,629                | 804,800        | 0.3711             |
| Nigeria   | 298,600                | 849,840        | 0.3514             |
| Australia | 37,652                 | 496,695        | 0.0758             |
| USA       | 37,312                 | 500,060        | 0.0746             |
| Japan     | 37,592                 | 527,393        | 0.0713             |
| Germany   | 37,205                 | 524,464        | 0.0709             |
| Canada    | 37,278                 | 532,632        | 0.0700             |
| UK        | 37,345                 | 538,493        | 0.0694             |

Любопытно... они и правда проводят большее количество операций! Но какой отрыв...

Взглянем не точечную диаграмму распределения:

<img src="/free_analysis/img/fraud_by_country.png"  alt="" width="600"/>


и увидим, что все наши данные по своей сути разделяются на два класса.

Разделение настолько бросается в глаза, что использовать для  его формализации методы машинного обучения даже оскорбительно для машины :)

Но что любопытно: все числа в предыдущей таблице крайне близки между странами внутри классов!

Рассмотрим долю мошеннических транзакций по категориям 

<img src="/free_analysis/img/Figure_9.png"  alt="" width="600"/>

Топ категорий по уровню мошенничества:

| Vendor Category  | Fraud Count | Total Transactions | Fraud Rate |
|------------------|------------:|-------------------:|-----------:|
| Travel           |     187,477 |            935,790 |    0.20034 |
| Grocery          |     186,987 |            934,029 |    0.20019 |
| Gas              |     186,829 |            935,401 |    0.19973 |
| Restaurant       |     186,951 |            936,178 |    0.19970 |
| Entertainment    |     186,890 |            936,173 |    0.19963 |

И взглянем на наши данные с позиции группировки стран:

<img src="/free_analysis/img/Figure_10.png"  alt="" width="600"/>


Удивительное постоянство!

Посмотрим на подкатегории транзакций:

<img src="/free_analysis/img/Figure_2.png"  alt="" width="600"/>


Глядя на эту диаграмму можно прийти к выводу, что залог банковской безопасности лежит в отсутствии перелетов и бронирований... если сидеть дома главным риском остается сфера онлайн покупок... но такой вывод слишком очевиден.

Все равно есть что-то противоестественное в построенной диаграмме... 
Как-то очень равномерно выделяется группировка столбцов между собой....

Но, что-то мы зациклились на типах транзакций, может быть тайна в другом?
Рассмотрим распределение по остальным параметрам:

Вот распределение по участию физической карты в оплате:

<img src="/free_analysis/img/Figure_4.png"  alt="" width="600"/>

Опять все поровну, хотя там где больше онлайн покупок и бронирований бесконтактных оплат должно быть больше...

По каналам транзакций все тоже равновесно:

<img src="/free_analysis/img/Figure_5.png"  alt="" width="600"/>

Даже разделение по месту транзакции в стране равно между группами стран!

<img src="/free_analysis/img/Figure_6.png"  alt="" width="600"/>

Тоже самое и с проверкой по выходным...

<img src="/free_analysis/img/Figure_8.png"  alt="" width="600"/>

К слову распределение уровня мошенничества по типам карт тоже равномерно:


| Card Type        | Fraud Rate |
|------------------|-----------:|
| Basic Credit     |  19.97%    |
| Platinum Credit  |  19.97%    |
| Gold Credit      |  19.97%    |
| Premium Debit    |  19.97%    |
| Basic Debit      |  19.97%    |

В реальности разница есть только в категории рискованности венчура:

<img src="/free_analysis/img/Figure_7.png"  alt="" width="600"/>

И то такое различие можно объяснить дисбалансом распределения мошеннических транзакций в подкатегориях.

Пора переходить к выводам!

## Вывод

Вспомним формулировку задания:

> Задание: провести разведочный анализ данных, придумать продуктовые и технические гипотезы — какую ценность можете извлечь из данных для организации, которая предоставила данные.

**Вспомним, что датасет представляется как реальный**

Что получается? Все как-то слишком циклично и похоже...
Вполне убедительным представляется гипотеза, что организация предоставившая данные сама стала жертвой мошенников, которые искусственно, но не искусно сгенерировали данные!

> Лучший совет такой организации не доверять любым выводам и заключениям которые можно сделать на их основе!

## Постскриптум

Предоставленная выше форма повествования ни в коем случае не преследует цели оскорбить уважаемых авторов задание и представляет собой лишь робкую попытку отвлечь их от унылой рутины.


Ваши задания действительно позволяют раскрыть творческий и интеллектуальный потенциал. 
Я получил огромное удовольствие в ходе попыток их решения!

P.S.S. Я понимаю, что, возможно отошел от стандартного хода решения задания предполагающего обучение нейронных сетей, регрессионных моделей и сложной классификации, но иногда имеет смысл набраться смелости и отойти от шаблона!

P.S.S.S. Возможно пара кадров из старого фильма красноречивей подчеркнет мою идею :)

<img src="/free_analysis/img/image-4.png"  alt="" width="600"/>

<img src="/free_analysis/img/image-3.png"  alt="" width="600"/>

Огромное Вам спасибо за уделенное внимание и время!
